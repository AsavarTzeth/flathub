{
  "app-id": "com.danplanet.chirp",
  "runtime": "org.gnome.Platform",
  "runtime-version": "3.24",
  "sdk": "org.gnome.Sdk",
  "command": "chirpw",
  "rename-desktop-file": "chirp.desktop",
  "rename-icon": "chirp",
  "finish-args": [
    "--socket=wayland",
    "--socket=pulseaudio",
    /* X11 + XShm access */
    "--share=ipc", "--socket=x11",
    "--persist=.chirp",
    "--filesystem=home",
    "--device=all"
  ],
  "cleanup": [
    "/include",
    "/lib/pkgconfig"
  ],
  "modules": [
    {
      "name": "chirp",
      "buildsystem": "simple",
      "build-commands": [
        "python2 setup.py install --prefix=/app --root=/ --optimize=1"
      ],
      "sources": [
        {
          "type": "archive",
          "path": "/home/asavartzeth/Versionskontroll/Upstream Work/chirp.tar",
          "sha256": "d949d45265cedc4f34152a254b6d682df4a317be9aeae931a638cc1cf46f2656"
        },
        {
          "type": "patch",
          "path": "chirp-fix-setup.patch",
          "strip-components": 0
        },
        {
          "type": "patch",
          "path": "chirp-disable-reporting.patch"
        },
        {
          "type": "file",
          "path": "chirp.svg"
        }
      ],
      "post-install": [
        "install -Dm644 chirp.svg /app/share/icons/hicolor/scalable/apps/chirp.svg"
      ],
      "cleanup": ["/share/man"],
      "modules": [
        {
          "name": "python2-pyserial",
          "buildsystem": "simple",
          "build-commands": [
            "python2 setup.py install --prefix=/app --root=/ --optimize=1"
          ],
          "sources": [{
            "type": "git",
            "url": "https://github.com/pyserial/pyserial.git",
            "branch": "v3.4",
            "commit": "c54c81d933b847458d465cd77e96cd702ff2e7be"
          }],
          "post-install": [
            "install -Dm644 LICENSE.txt /app/share/licenses/python2-pyserial/LICENSE"
          ],
          "cleanup": ["/bin/miniterm.py"]
        },
        {
          "name": "python2-lxml",
          "buildsystem": "simple",
          "build-commands": [
            "python2 setup.py build",
            "python2 setup.py install --prefix=/app --root=/ --optimize=1"
          ],
          "build-options": {
            "env": {
              "XSLT_CONFIG": "pkg-config libxslt"
            }
          },
          "sources": [{
            "type": "archive",
            "url": "https://pypi.io/packages/source/l/lxml/lxml-3.8.0.tar.gz",
            "sha256": "736f72be15caad8116891eb6aa4a078b590d231fdc63818c40c21624ac71db96"
          }],
          "post-install": [
            "install -Dm644 LICENSES.txt /app/share/licenses/python2-lxml/LICENSE",
            "install -m644 doc/licenses/BSD.txt /app/share/licenses/python2-lxml/",
            "install -m644 doc/licenses/elementtree.txt /app/share/licenses/python2-lxml/"
          ]
        },
        {
          "name": "python2-cairo",
          "buildsystem": "simple",
          "build-commands": [
            "python2 setup.py install --prefix=/app --root=/ --optimize=1"
          ],
          "sources": [{
            "type": "git",
            "url": "https://github.com/pygobject/pycairo.git",
            "branch": "v1.14.0",
            "commit": "6fa55284f74b2515f6f885dc7d4dce7f8bcc8bd7"
          }],
          "post-install": [
            "install -Dm644 COPYING /app/share/licenses/python2-cairo/COPYING",
            "install -m644 COPYING-MPL-1.1 /app/share/licenses/python2-cairo/"
          ]
        },
        {
          "name": "python2-gobject",
          "build-options": { "env": { "PYTHON": "python2" } },
          "sources": [{
            "type": "archive",
            "url": "https://download.gnome.org/sources/pygobject/3.24/pygobject-3.24.1.tar.xz",
            "sha256": "a628a95aa0909e13fb08230b1b98fc48adef10b220932f76d62f6821b3fdbffd"
          }],
          "post-install": [
            "install -Dm644 COPYING /app/share/licenses/python2-gobject2/COPYING"
          ]
        }
      ]
    }
  ]
}
