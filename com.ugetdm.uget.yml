id: com.ugetdm.uget
runtime: org.gnome.Platform
runtime-version: 3.28
sdk: org.gnome.Sdk
command: uget-gtk
rename-desktop-file: uget-gtk.desktop
rename-icon: uget-icon
finish-args:
    # X11 + XShm access
  - --share=ipc
  - --socket=x11
    # Wayland access
  - --socket=wayland
    # Sound access
  - --socket=pulseaudio
    # Dconf access
  - --filesystem=xdg-run/dconf
  - --filesystem=~/.config/dconf:ro
  - --talk-name=ca.desrt.dconf
  - --env=DCONF_USER_CONFIG_DIR=.config/dconf
  - --talk-name=org.freedesktop.Notifications
    # Other
  - --share=network
    #  - --filesystem=home
cleanup:
  - '*.a'
  - '*.h'
  - '*.la'
  - /include
  - /lib/pkgconfig

modules:
  - name: uget
    sources:
      - type: archive
        url: 'https://downloads.sourceforge.net/project/urlget/uget%20%28stable%29/2.2.1/uget-2.2.1.tar.gz'
        sha256: 445cf58799a9a06e08cd4180b172f4b0a8a8c2ee82da732bdfe2dd502d949936
      - type: patch
        path: uget-desktop-exec.patch
      - type: patch
        path: patch/uget/0001-Use-native-file-chooser.patch
    post-install:
      - install -Dm644 COPYING /app/share/licenses/uget/COPYING
    modules:

      - name: aria2
        sources:
        - type: archive
          url: 'https://github.com/aria2/aria2/releases/download/release-1.34.0/aria2-1.34.0.tar.xz'
          sha256: 3a44a802631606e138a9e172a3e9f5bcbaac43ce2895c1d8e2b46f30487e77a3
        post-install:
          - install -Dm644 COPYING /app/share/licenses/aria2/COPYING
        cleanup:
          - /share/doc
          - /share/man
