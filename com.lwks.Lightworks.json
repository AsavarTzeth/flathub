{
  "app-id": "com.lwks.Lightworks",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "1.6",
  "sdk": "org.freedesktop.Sdk",
  "command": "lightworks",
  "finish-args": [
    "--socket=wayland",
    "--socket=pulseaudio",
    /* X11 + XShm access */
    "--share=ipc", "--socket=x11",
    "--extra-data=lwks.deb:66eb9f9678d979db76199f1c99a71df0ddc017bb47dfda976b508849ab305033:65869132::https://www.lwks.com/index.php?option=com_docman&task=doc_download&gid=194"
  ],
  "modules": [
    {
      "name": "lwks",
      "buildsystem": "simple",
      "build-commands": [
        "mkdir -p /app/bin",
        "install apply_extra /app/bin",
        "install lwks.sh /app/bin/lightworks"
      ],
      "sources" : [
        {
          "type": "script",
          "dest-filename": "apply_extra",
          "commands": [
            "ar x lwks.deb",
            "rm -f lwks.deb",
            "tar xf data.tar.xz",
            "rm -f control.tar.gz data.tar.xz debian-binary",
            "rm -rf lib",
            "mv usr/* .",
            "rmdir usr",
            "mkdir -p export/share/applications",
            "sed 's|Icon=/usr/share/lightworks/Icons/App.png|Icon=com.lwks.Lightworks|; s|Exec=/usr/bin/lightworks|Exec=lightworks|' share/applications/lightworks.desktop > export/share/applications/com.lwks.Lightworks.desktop",
            "mkdir -p export/share/icons/hicolor/64x64/apps",
            "cp share/lightworks/Icons/App.png export/share/icons/hicolor/64x64/apps/com.lwks.Lightworks.png"
          ]
        },
        {
          "type": "script",
          "dest-filename": "lwks.sh",
          "commands": ["exec /app/extra/bin/lightworks \"$@\""]
        }
      ]
    }
  ]
}
